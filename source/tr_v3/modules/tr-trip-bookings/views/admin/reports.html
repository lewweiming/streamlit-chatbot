{% extends "_layout_fomantic.html" %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<div class="ui container">
    <h2 class="ui dividing header">Trip Bookings Reports Dashboard</h2>
    <div class="ui form">
        <div class="fields">
            <div class="field">
                <label>Date Range</label>
                <input type="date" placeholder="Start Date">
            </div>
            <div class="field">
                <label>To</label>
                <input type="date" placeholder="End Date">
            </div>
            <div class="field">
                <label>Filter by Trip Type</label>
                <select class="ui dropdown">
                    <option value="">Select Trip Type</option>
                    <option value="1">Adventure</option>
                    <option value="2">Cultural</option>
                    <option value="3">Beach</option>
                </select>
            </div>
            <div class="field">
                <label>Filter by Destination</label>
                <select class="ui dropdown">
                    <option value="">Select Destination</option>
                    <option value="1">Paris</option>
                    <option value="2">Bali</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- Key Metrics Overview -->
    <div class="ui four statistics">
        <div class="statistic">
            <div class="value">120</div>
            <div class="label">Total Trips Booked</div>
        </div>
        <div class="statistic">
            <div class="value">$45,000</div>
            <div class="label">Total Revenue</div>
        </div>
        <div class="statistic">
            <div class="value">95</div>
            <div class="label">Trips Completed</div>
        </div>
        <div class="statistic">
            <div class="value">4.2</div>
            <div class="label">Average Trip Rating</div>
        </div>
    </div>

    <!-- Charts & Graphs Section -->
    <h3 class="ui dividing header">Reports Overview</h3>
    <div class="ui grid">
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="bookingTrendsChart"></canvas>
            </div>
        </div>
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="revenueBreakdownChart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="ui grid">
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="popularDestinationsChart"></canvas>
            </div>
        </div>
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="customerDemographicsChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Detailed Reports Table -->
    <h3 class="ui dividing header">Detailed Reports</h3>
    <table class="ui celled table">
        <thead>
            <tr>
                <th>Booking ID</th>
                <th>Customer Name</th>
                <th>Trip Type</th>
                <th>Destination</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Total Cost</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>501</td>
                <td>Jane Smith</td>
                <td>Adventure</td>
                <td>Paris</td>
                <td>2024-09-05</td>
                <td>2024-09-12</td>
                <td>$1500</td>
                <td>Completed</td>
            </tr>
            <!-- Add more rows as needed -->
        </tbody>
    </table>

    <!-- Export & Download Section -->
    <button class="ui primary button">Export to CSV</button>
    <button class="ui button">Export to PDF</button>
    <button class="ui button">Print</button>
</div>
{% endblock %}

{% block script %}
<script>
    // Example data for the charts
    const bookingTrendsCtx = document.getElementById('bookingTrendsChart').getContext('2d');
    new Chart(bookingTrendsCtx, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Booking Trends',
                data: [40, 55, 70, 50, 80, 100],
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 2,
                fill: false
            }]
        }
    });

    const revenueBreakdownCtx = document.getElementById('revenueBreakdownChart').getContext('2d');
    new Chart(revenueBreakdownCtx, {
        type: 'bar',
        data: {
            labels: ['Adventure', 'Cultural', 'Beach'],
            datasets: [{
                label: 'Revenue Breakdown',
                data: [15000, 18000, 12000],
                backgroundColor: ['rgba(54, 162, 235, 0.6)', 'rgba(255, 99, 132, 0.6)', 'rgba(255, 206, 86, 0.6)']
            }]
        }
    });

    const popularDestinationsCtx = document.getElementById('popularDestinationsChart').getContext('2d');
    new Chart(popularDestinationsCtx, {
        type: 'pie',
        data: {
            labels: ['Paris', 'Bali', 'New York'],
            datasets: [{
                data: [40, 35, 25],
                backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)']
            }]
        }
    });

    const customerDemographicsCtx = document.getElementById('customerDemographicsChart').getContext('2d');
    new Chart(customerDemographicsCtx, {
        type: 'bar',
        data: {
            labels: ['18-25', '26-35', '36-45', '46-60', '60+'],
            datasets: [{
                label: 'Customer Age Groups',
                data: [20, 50, 30, 15, 5],
                backgroundColor: 'rgba(153, 102, 255, 0.6)'
            }]
        }
    });
</script>
{% endblock %}