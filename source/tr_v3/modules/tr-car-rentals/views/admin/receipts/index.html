{% extends "_layout_admin_fomantic.html" %}

{% block content %}
<section style="padding-top: 30px; padding-bottom: 70px;">
    <h2 class="ui header">Car Rental Receipts</h2>
    <div class="ui message">
        <ul>
        <li>Receipts can be generated multiple times for the same booking. Existing receipts will be voided and replaced with the most recent generated receipt for a booking.</li>
        <li>Receipts can be generated by clicking on "Confirm" action in the manager's bookings dashboard.</li>
        <li>Points to the table "car_rentals_receipts".</li>
        </ul>
      </div>
    
    <div class="ui long scrolling container">
        <table class="ui first last head stuck unstackable celled single line table" style="z-index: 1;">
            <thead>
                <tr>
                    <th>Receipt Number</th>
                    <th>Issue Date</th>
                    <th>Customer Name</th>
                    <th>Customer Email</th>
                    <th>Customer Phone</th>
                    <th>Car Model</th>
                    <th>Pickup Date</th>
                    <th>Return Date</th>
                    <th>Pickup Location</th>
                    <th>Return Location</th>
                    <th>Rental Days</th>
                    <th>Rental Fee</th>
                    <th>Insurance Fee</th>
                    <th>GPS Fee</th>
                    <th>Subtotal</th>
                    <th>Tax</th>
                    <th>Total Amount</th>
                    <th>Payment Method</th>
                    <th>Card Last Four</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for row in rows %}
                <tr>
                    <td>{{ row.receipt_number }}</td>
                    <td>{{ row.issued_date }}</td>
                    <td>{{ row.customer_name }}</td>
                    <td>{{ row.customer_email }}</td>
                    <td>{{ row.customer_phone }}</td>
                    <td>{{ row.car_model }}</td>
                    <td>{{ row.pickup_date }}</td>
                    <td>{{ row.return_date }}</td>
                    <td>{{ row.pickup_location }}</td>
                    <td>{{ row.return_location }}</td>
                    <td>{{ row.rental_days }}</td>
                    <td>{{ row.rental_fee }}</td>
                    <td>{{ row.insurance_fee is not null ? row.insurance_fee : '-' }}</td>
                    <td>{{ row.gps_fee is not null ? row.gps_fee : '-' }}</td>
                    <td>{{ row.subtotal }}</td>
                    <td>{{ row.tax }}</td>
                    <td>{{ row.total_amount }}</td>
                    <td>{{ row.payment_method }}</td>
                    <td>{{ row.card_last_four is not null ? row.card_last_four : '-' }}</td>
                    <td>
                        <a href="/framework/admin/car-rentals/receipts/pdf/{{ row.receipt_number }}" class="ui button">View PDF</a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="20" class="center aligned">No receipts found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endblock %}