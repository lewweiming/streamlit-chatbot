{% extends "_layout_fomantic.html" %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<div class="ui container">
    <h2 class="ui dividing header">Car Rental Reports Dashboard</h2>
    <div class="ui form">
        <div class="fields">
            <div class="field">
                <label>Date Range</label>
                <input type="date" placeholder="Start Date">
            </div>
            <div class="field">
                <label>To</label>
                <input type="date" placeholder="End Date">
            </div>
            <div class="field">
                <label>Filter by Agency</label>
                <select class="ui dropdown">
                    <option value="">Select Agency</option>
                    <option value="1">Agency 1</option>
                    <option value="2">Agency 2</option>
                </select>
            </div>
            <div class="field">
                <label>Filter by Location</label>
                <select class="ui dropdown">
                    <option value="">Select Location</option>
                    <option value="1">Location 1</option>
                    <option value="2">Location 2</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- Key Metrics Overview -->
    <div class="ui four statistics">
        <div class="statistic">
            <div class="value">120</div>
            <div class="label">Total Bookings</div>
        </div>
        <div class="statistic">
            <div class="value">$25,000</div>
            <div class="label">Total Revenue</div>
        </div>
        <div class="statistic">
            <div class="value">80</div>
            <div class="label">Cars Rented</div>
        </div>
        <div class="statistic">
            <div class="value">5.2 Days</div>
            <div class="label">Average Rental Duration</div>
        </div>
    </div>

    <!-- Charts & Graphs Section -->
    <h3 class="ui dividing header">Reports Overview</h3>
    <div class="ui grid">
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="rentalTrendsChart"></canvas>
            </div>
        </div>
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="revenueBreakdownChart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="ui grid">
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="popularCarsChart"></canvas>
            </div>
        </div>
        <div class="eight wide column">
            <div class="ui segment">
                <canvas id="customerDemographicsChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Detailed Reports Table -->
    <h3 class="ui dividing header">Detailed Reports</h3>
    <table class="ui celled table">
        <thead>
            <tr>
                <th>Booking ID</th>
                <th>Customer Name</th>
                <th>Car Model</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Duration</th>
                <th>Total Cost</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>101</td>
                <td>John Doe</td>
                <td>Toyota Camry</td>
                <td>2024-09-15</td>
                <td>2024-09-20</td>
                <td>5 Days</td>
                <td>$500</td>
                <td>Completed</td>
            </tr>
            <!-- Add more rows as needed -->
        </tbody>
    </table>

    <!-- Export & Download Section -->
    <button class="ui primary button">Export to CSV</button>
    <button class="ui button">Export to PDF</button>
    <button class="ui button">Print</button>
</div>
{% endblock %}

{% block script %}
<script>
    // Example data for the charts
    const rentalTrendsCtx = document.getElementById('rentalTrendsChart').getContext('2d');
    new Chart(rentalTrendsCtx, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Rental Trends',
                data: [30, 45, 60, 50, 80, 95],
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 2,
                fill: false
            }]
        }
    });

    const revenueBreakdownCtx = document.getElementById('revenueBreakdownChart').getContext('2d');
    new Chart(revenueBreakdownCtx, {
        type: 'bar',
        data: {
            labels: ['SUV', 'Sedan', 'Truck', 'Van'],
            datasets: [{
                label: 'Revenue Breakdown',
                data: [12000, 8000, 5000, 3000],
                backgroundColor: ['rgba(54, 162, 235, 0.6)', 'rgba(255, 99, 132, 0.6)', 'rgba(255, 206, 86, 0.6)', 'rgba(75, 192, 192, 0.6)']
            }]
        }
    });

    const popularCarsCtx = document.getElementById('popularCarsChart').getContext('2d');
    new Chart(popularCarsCtx, {
        type: 'pie',
        data: {
            labels: ['Toyota Camry', 'Honda Civic', 'Ford Focus'],
            datasets: [{
                data: [30, 40, 30],
                backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.6)', 'rgba(255, 206, 86, 0.6)']
            }]
        }
    });

    const customerDemographicsCtx = document.getElementById('customerDemographicsChart').getContext('2d');
    new Chart(customerDemographicsCtx, {
        type: 'bar',
        data: {
            labels: ['18-25', '26-35', '36-45', '46-60', '60+'],
            datasets: [{
                label: 'Customer Age Groups',
                data: [20, 35, 25, 15, 5],
                backgroundColor: 'rgba(153, 102, 255, 0.6)'
            }]
        }
    });
</script>
{% endblock %}